{% load static %}
<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		{% block metas %}
		<meta name="description" content="{{ site_description }}">
		<meta name="keywords" content="{{ site_keywords }}">
		{% endblock %}

		<title>{% block title %}{% endblock title%} - Teddy &amp; Pudding</title>
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
		<link href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
		<script src="https://cdn.bootcss.com/headroom/0.9.4/headroom.min.js"></script>
		<!--for code highlight-->
		<link rel="stylesheet" href="{% static 'blog/css/highlights/github.css' %}">
		<link rel="stylesheet" href="{% static 'blog/css/base.css' %}?v=20180420">
	</head>
	<body>
		<nav class="navbar navbar-expand-md navbar-light fixed-top bg-white blog-navbar headroom">
			<a class="navbar-brand" href="{% url 'blog:index' %}">Teddy &amp; Pudding</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarCollapse">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
					{% url 'blog:index' as index_url %}
						<a class="nav-link {% if request.path == index_url %}active{% endif %}" href="{{ index_url }}"><i class="fa fa-home mr-1"></i>首页</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ index_url }}">
						<i class="fa fa-blogger mr-1"></i>
						博客
						</a>
					</li>
				</ul>
				<!--
	    <form class="form-inline mt-2 mt-md-0">
	    <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
	    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
	    </form>
				-->
			</div>
			<ul class="navbar-nav">
				{% if user.is_authenticated %}
				<li class="nav-item dropdown">
					<a id="navbarDropdown" class="nav-link dropdown-toggle py-0 my-0" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="{{ user.username }}, 欢迎回来!">
						{% if user.socialaccount_set.exists and user.avatar.url != '/media/avatar/default.png' %}
						<img class="avatar" src="{{ user.socialaccount_set.all.0.get_avatar_url }}" alt="{{ user.username }}" />
						{% else %}
						<img class="avatar" src="{{ user.avatar.url }}" alt="{{ user.username }}" />
						{% endif %}
					</a>
					<div class="dropdown-menu dropdown-menu-right mt-0 rounded-0 border-0" aria-labelledby="navbarDropdown">
						 <a class="dropdown-item" href="{% url 'users:profile' %}">
						<i class="fa fa-user text-info mr-1"></i>
						个人资料
						</a>
						<a class="dropdown-item" href="{% url 'account_logout' %}">
						<i class="fa fa-sign-out text-info mr-1" aria-hidden="true"></i>登出</a>
					</div>
				</li>	
				{% else %}
				<li class="nav-item">
					<a class="nav-link" href="{% url 'account_login' %}">
						<i class="fa fa-sign-in mr-1"></i>
						登录
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'account_signup' %}">
						<i class="fa fa-registered mr-1"></i>
						注册</a>
				</li>

				{% endif %}
			</ul>
		</nav>

		<div class="container">
			<div class="row mt-3">
				{% block main %}
				{% endblock main %}
			</div>
		</div>

		<footer id="site-footer" class="footer bg-white">
			<div class="container text-muted small text-center">
				&copy 2018 Design by Teddy with Love
			</div>
		</footer>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdn.bootcss.com/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
		<script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
		<script charset="utf-8">
			var myElement = document.querySelector(".blog-navbar");
			var headroom = new Headroom(myElement);
			headroom.init();
		</script>
		{% block end_file %}
		{% endblock %}
	</body>
</html>
